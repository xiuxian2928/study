<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
  </head>
  <body>
    웹브라우저에서 request를 보내면 서버에서 response를 하는 구조
    웹이란?
    web : world wide web의 줄임말로 전세계적인 연결망을 나타내는 말
    웹은 우리가 웹브라우저로 통해 돌아다니는 가상의 연결망 세계
    웹페이지의 텍스트 : hyper text 다른 텍스트에 대한 참조를 가지고있는 텍스트
    html : hypertext markup language의 줄임말

    url이란?
    uniform resource locator 의 약자
    웹에 존재하는 특정 데이터를 나타내는 문자열
    호스트 : 전 세계 서버 중 하나의 서버를 특정 ex) wmakers.kr
    경로(path) : 서버에 있는 데이터 중 원하는 데이터를 특정
    쿼리(query) : 데이터에 관한 세부적인 요구사항 ?뒤에 나타나는 내용

    웹브라우저의 동작 과정
    웹브라우저에 url을 입력하면 
    1. 호스트 부분을 보고, 전세계의 수많은 서버들 중 정확히 어느 서버와 통신을 해야 하는지 찾는다
    (이때 호스트 부분에 적힌 것을 도메인 네임이라고 한다. 
    특정 서버를 외우기 어려운 ip주소가 아니라 외우기 쉬운 문자열로 나타낸 것이 바로 도메인 네임이다. 
    웹 브라우저가 도메인 네임만으로 특정 서버를 식별하는 방법 : domain name resolution이라고 하는 작업을 수행하면 해당 도메인 네임을 나타내는 특정 서버를 식별할 수 있다)
    * Domain Name Resolution의 원리
    - 1단계 : 내 컴퓨터는 기본적으로 설정된 네임서버에 wmakers.kr의 IP 주소를 알려달라는 요청을 보낸다. 네임 서버라는 건 도메인 네임을 IP 주소로 변화낳는 과정에 참여하는 서버들이다. 내 컴퓨터에서 맨 처음 어떤 네임 서버에 요청할 것인지는 미리 설정되어 있고, 기존의 설정에서 다른 네임 서버로 바꾸는 것도 가능하다. 내 컴퓨터가 사용하는 네임 서버에 관한 설정은 OS마다 다르다
    - 2,3단계 : 내 컴퓨터의 요청을 받은 네임 서버는 이제 루트 네임 서버에 '.kr'로 끝나는 도메인 네임들을 관리하는 네임 서버의 주소를 알려달라는 요청을 한다. 그럼 루트 네임 서버는 '.kr' 네임 서버의 IP 주소를 알려준다.
    - 4,5단계 : 네임 서버는 '.kr' 네임 서버에게 'wmakers.kr'의 IP 주소를 알려줄 수 있는 'wmakers.kr' 네임 서버의 IP 주소를 알려달라고 요청. 그럼 '.kr' 네임 서버는 'wmakers.kr' 네임 서버의 IP 주소를 알려준다.
    - 6,7단계 : 그럼 네임서버는 'wmakers.kr' 네임 서버에게 'wmakers.kr'의 IP 주소를 알려달라고 요청. 마침내 네임서버는 'wmakers.kr'의 실제 IP 주소를 응답으로 얻게 됨
    - 8단계 : 네임 서버는 내 컴퓨터에게 wmakers.kr의 IP주소를 알려주고, 내 컴퓨터는 이 IP주소를 갖고 코드잇 서버와 본격적인 통신을 시작
    (*도메인에 접속할 때마다 매번 이 과정을 거치는것은 아니다. 한번 IP 주소를 받은 후에는 내 컴퓨터의 OS가 그 IP 주소를 보통 별도로 저장해두고 계속 사용하기 때문, 또한 내 컴퓨터가 사용하는 가장 근처의 네임 서버 또한 자주 요청받는 도메인 네임에 대해서는 별도로 외부에 요청할 필요가 없도록 캐시로 관리하는 경우가 많다. 즉 이 과정 전체가 일어나는 경우는 일반적으로 처음 접속하는 도메인 주소인 경우에만 그렇다.)

    2. 1번에서 어떤 서버와 통신해야 하는지를 식별하고 나면, 웹 브라우저는 해당 서버로 리퀘스트를 보낸다. 이때 URL에서 path 이후 부분들을 리퀘스트에 담아서 보낸다.

    3. 리퀘스트를 받은 서버는 리퀘스트에 담긴 path 이후의 부분들을 보고, 그것이 의미하는 데이터를 찾고, 찾은 결과를 리스폰스에 담아서 보내준다.

    4. 그럼 웹 브라우저는 받은 리스폰스의 내용을 갖고 사용자에게 보여준다. 이때 리스폰스의 내용이 HTML코드, Javascript코드 등에 해당하면 그에 맞는 예쁜화면을 사용자에게 그려서 보여주는 것. 리스폰스의 내용에는 다른 종류도 많다.


    HTTP란?
    http란 스킴이다. 스킴에는 프로토콜의 이름이 들어간다.
    프로토콜이란? 
    통신을 하는 두 주체가 지켜야 하는 통신 규약(브라우저랑 서버가 지켜야하는 규약)
    hypertext transfer protocol 

    우리가 어떤 웹 페이지를 보기 위해 URL을 입력하고 엔터를 치면 보통 한 번 이상의 리퀘스트와 리스폰스가 오고간다. 
    예를 들면 <img src="https://www.server_A.com/a/b/exmaple.png".../> 의 src 속성에 있는 이미지를 띄워주려면 img 태그의 src 속성에 적힌 URL로 다시 리퀘스트를 보내서 해당 이미지를 받아와야한다.
    이런식으로 보통 브라우저가 하나의 페이지를 그릴 때는 첫 리스폰스의 내용 안에서 또다시 요구되는 여러가지 다른 것들을 구하기 위해 다시 여러개의 리퀘스트를 보내는 것이 일반적이다. 게다가 그렇게 또 받은 리스폰스의 내용에 따라 또 새로운 리퀘스트를 보내야 할 수도 있다. 바로 이런 원리 때문에 우리가 어떤 웹페이지를 딱 한번 접속했다고 해도 그 사이에는 수많은 리퀘스트와 리스폰스가 발생하는 것이다.

    https://deftkang.tistory.com/119
    https://khalidpark2029.tistory.com/129
    https://velog.io/@rlaaltj1765/%EC%9B%B9-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%99%80-%EB%B0%B1%EC%97%94%EB%93%9C%EC%9D%98-%EC%86%8C%ED%86%B5%EC%97%90-%EA%B4%80%ED%95%98%EC%97%AC-%EC%A1%B0%EC%82%AC
  </body>
</html>